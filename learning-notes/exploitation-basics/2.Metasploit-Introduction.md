# 1. Main Components of Metasploit (Các thành phần chính)
- `msfconsole`: launch Metasploit console. 
- Các modules (check lại trong THM)

# 2. Msfconsole
- `ls`: ists the contents of the folder from which Metasploit was launched.
- `clear`: clear the terminal.
- `help + [command]`: help menu for the command 
- `history`: the commands you have typed.
- `use + [exploit folder]`
	+ `show options`
- `back`: leave the context
- `info`: Further information on any module
- `search type:[module]`: searches using CVE numbers, exploit names (eternalblue, heartbleed, etc.), or target system.

# 3. Working with modules
- Sau khi dùng lệnh `use module` thì cần phải set các parameter. 
	+ `show options`: để biết các parameter cần được set.
- `set PARAMETER_NAME VALUE`: set parameter
- Có 5 loại prompt khác nhau:
	+ The regular command prompt: You can not use Metasploit commands here.
	+ The msfconsole prompt
	+ A context prompt
	+ The Meterpreter prompt
	+ A shell on the target system
- Các parameter thường dùng:
	+ **RHOSTS**: "remote host", the IP address of the target system. A single IP address or a network range can be set. You can also use a file where targets are listed, one target per line using file:/path/of/the/target_file.txt
	+ **RPORT**: remote port, the port on the target system the vulnerable application running on
	+ **PAYLOAD**: the payload you will use with the exploit.
	+ **LHOST**: "localhost" the attacking machine IP address
	+ **LPORT**: “Local port”, the port you will use for the reverse shell to connect back to. This is a port on your attacking machine, and you can set it to any port not used by any other application.
	+ **SESSION**: Each connection established to the target system using Metasploit will have a session ID. You will use this with post-exploitation modules that will connect to the target system using an existing connection.
- `unset PARAMETER` hoặc `unset all`: xóa các cài cặt.
- `setg`: set values dùng cho tất cả modules.
- `unsetg`: xóa set values.

## 3.1 Using modules
- Sau khi tất cả các parameter được set, launch the module bằng lệnh `exploit` hoặc `run` cho các lệnh k cần phải khai thác (port scanner, vulnerability scanner)
- `exploit -z`: run the exploit and background the session as soon as it opens.
- `check`: check if the target system is vulnerable without exploiting it.

## 3.2 Session
- Khi 1 vulnerability exploit thành công, một session sẽ đc tạo ra. Đây là kênh giao tiếp giữa target system và Metasploit.
- `background`: to background the session prompt and go back to the msfconsole prompt.
- `CTRL + Z`: quay trở lại session.
- `session -i [number]`: interact với session 

# 4. Summary
- The exploitation process comprises three main steps:
	+ finding the exploit
	+ customizing the exploit
	+ exploiting the vulnerable service.